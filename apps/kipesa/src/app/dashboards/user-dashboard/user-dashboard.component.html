<mat-toolbar
  aria-label="my dashboard"
  class="d-flex align-items-center flex-no-wrap gap-3 justify-content-between bg-white"
>
  <small>My Dashboard</small>

  <kps-iconic-button
    icon="refresh"
    matTooltip="Refresh dashboard data"
    btnAriaLabel="refresh dashboard data"
    (clicked)="refreshDashboard()"
  />
</mat-toolbar>

<section
  class="d-flex gap-3 my-3 flex-wrap flex-grow-1 overflow-y-auto overflow-x-hidden p-2"
>
  <mat-card>
    <mat-card-header>
      <mat-card-title>My Memberships</mat-card-title>
      <mat-card-subtitle>Total: {{ totalMemberships() }} </mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="mt-3">
      <small class="mb-3">Latest Association Memberships:</small>

      <table class="table table-responsive table-light">
        <tbody class="tbody">
          @for (membership of myMemberships(); track membership.id; let
          indx=$index) {
          <tr>
            <td>{{ indx + 1 + '. ' }}</td>
            <td>
              <a
                [routerLink]="['/associations', membership.association.id]"
                class="text-decoration-none"
              >
                {{ membership.association.name }}
              </a>
            </td>
            <td>
              <small class="badge bg-primary">{{ membership.role.name }}</small>
            </td>
            <td>
              @if(membership.status === 'PENDING') {
              <small class="badge bg-warning">{{ membership.status }}</small>

              }@else if (membership.status === 'REJECTED') {
              <small class="badge bg-danger">{{ membership.status }}</small>

              }@else {
              <small class="badge bg-success">{{ membership.status }}</small>
              }
            </td>
          </tr>
          }
        </tbody>
      </table>
    </mat-card-content>
    <mat-card-actions align="start">
      <kps-button text="View all" btnAriaLabel="view all" />
    </mat-card-actions>
  </mat-card>
</section>
