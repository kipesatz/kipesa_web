<form [formGroup]="getFormGroup()" (ngSubmit)="submitForm()" class="login-form">
  <div class="w-100 d-flex justify-content-center mb-4">
    <mat-button-toggle-group
      [formControl]="loginMethodControl"
      class="row row-cols-2"
    >
      <mat-button-toggle value="email" class="col"
        >Login with Email</mat-button-toggle
      >
      <mat-button-toggle value="phone" class="col"
        >Login with Phone</mat-button-toggle
      >
    </mat-button-toggle-group>
  </div>

  @if (loginMethodControl.value === 'email') {
  <kps-email-field
    [controller]="getController('loginId')"
    controlName="email"
  />
  } @else {
  <kps-phone-field [(phoneString)]="getFormGroup().controls.loginId.value" />
  }

  <kps-password-field
    [controller]="getController('password')"
    controlName="password"
  />

  <div class="d-block">
    <kps-button
      text="Login"
      btnAriaLabel="login"
      variant="flat"
      [isFullWidth]="true"
      [loading]="loading$()"
      btnType="submit"
    />
  </div>
</form>
